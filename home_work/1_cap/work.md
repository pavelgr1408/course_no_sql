# CAP-классификация баз данных

## MongoDB => CP (Consistency + Partition Tolerance)

MongoDB по умолчанию выбирает согласованность. Когда происходит разделение сети (partition), система жертвует доступностью — вторичные реплики не смогут обрабатывать запросы на запись, пока не восстановится связь с primary нодой.

Тут важный нюанс: через настройки read concern и write concern можно сдвинуть MongoDB ближе к AP-модели, но из коробки она все-таки CP. Replica set работает так, что если мастер-нода недоступна, запись просто не пройдет до выбора нового мастера.

## MSSQL => CA (Consistency + Availability)

Классическая реляционная СУБД, которая не рассчитана на распределенную работу. MSSQL гарантирует строгую согласованность (ACID-транзакции) и высокую доступность в рамках одного датацентра, но партицирование сети для нее критично — система просто не функционирует при сетевых разрывах между узлами.

Собственно, это типичная CA-система: отличная согласованность и доступность, но только пока все узлы могут общаться друг с другом.

## Cassandra => AP (Availability + Partition Tolerance)

Cassandra заточена под высокую доступность и работу в распределенной среде. Даже при разделении сети кластер продолжает принимать запросы — каждая партиция работает независимо. Плата за это — eventual consistency: данные могут быть рассинхронизированы между узлами какое-то время.

Через tunable consistency можно настроить уровень согласованности (например, QUORUM), но суть AP это не меняет — доступность важнее мгновенной согласованности.